---
aliases:
  - Docker
tags:
  - 문헌메모
  - 완료
---


---


Source :
Author : 
URL :

## Buildkit - CAS
buildkit에서는 효율적인 빌드 아티팩트 관리를 위해 컨텐츠 기반 주소 지정(CAS)을 사용중에 있다.
CAS를 통해 Buildkit은 그 데이터를 그 내용에 기반하여 식별하고 참조한다.
CAS는 쉽게 위치나 파일 이름으로 식별하는 것이 아닌, 파일의 내용을 기반으로 해쉬값을 토대로 식별하는 것을 말함.

## CAS
콘텐츠 기반 주소 지정은 데이터의 내용을 암호화 해시 함수(ex: SHA256)를 사용하여 고유 식별자를 생성하고, 이 식별자를 통해 데이터를 저장하고 식별하는 것을 말함.
동일한 내용을 가진 데이터는 같은 해시값을 가지기 때문에 데이터 중복 여부를 정확하게 판단할 수 있음.

### 특징
- 불변성 : 데이터가 변경되면 해시값도 변경되기 때문에, 무결성을 보장함
- 중복 제거 : 동일한 컨텐츠를 하 번만 저장되어 저장 공간을 절약
- 효율적인 검색 : 해시 값을 통해 빠르고 정확하게 데이터를 찾을 수 있음
- 무결성 검증 : 저장된 데이터가 손상되었는지 여부를 해시 값을 통해 확인할 수 있음

### Buildkit 에서의 활용 방식
1. 빌드 단계의 식별과 캐싱
	- 입력 및 출력 캐싱 : 각 빌드 단계에서 사용되는 입력과 출력물에 대해 콘텐츠 해시를 계산한다
	- 캐시 키 : 빌드 단계의 입력 해시와 명령어 등을 조합하여 고유한 캐시 키를 생성
	- 캐시 조회 : 동일한 캐시 키가 이미 존재한다면, 해당 단계의 빌드 결과물을 재사용
2. 레이어의 효율적인 저장
	- 레이어 중복 제거 : 이미지 레이어를 콘텐츠 해시로 저장하여 동일한 레이어를 여러 번 저장하지 않음
	- 레이어 재사용 : 다른 이미지나 빌드에서도 동일한 해시 값을 가지고 있다면 해당 레이어 재사용
3. 병렬 빌드 및 분산 캐시
	- 병렬 처리 최적화 : 각 빌드 단계의 의존성을 해시로 관리하여 병렬 실행 될 수 있는 부분을 분배
	- 분산 캐시 공유 : 원격 저장소나 다른 빌드 머신과 함께 캐시를 공유할 때, 콘텐츠 해시를 통해 충돌없이 데이터 관리
4. 데이터 무결성과 보안 강화
	- 데이터 검증 : 해시 값을 통해 데이터의 무결성을 확인하여 빌드의 신뢰성을 높임
	- 보안 강화 : 해시 값을 통해 데이터의 변조를 감지하고 보안을 강화


### Link of Thoughts
Area : #300-DevOps/320-Container-Orchestration 

Keywords :
- [[Docker]]

Related Notes : 
- [[Buildkit - 구조]]